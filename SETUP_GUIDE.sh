#!/bin/bash
# Firebase Setup & Deployment Guide
# Run this as a reference checklist

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  FIREBASE BACKEND - SETUP & DEPLOYMENT GUIDE"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "ğŸ“‹ STEP 1: ENVIRONMENT SETUP"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  1. Copy environment template:"
echo "     cp .env.example .env.local"
echo ""
echo "  2. Edit .env.local with your Firebase credentials:"
echo "     VITE_FIREBASE_API_KEY=..."
echo "     VITE_FIREBASE_PROJECT_ID=..."
echo "     (Get values from Firebase Console > Project Settings)"
echo ""
echo "  3. Restart dev server for changes to take effect"
echo ""

echo "ğŸ” STEP 2: DEPLOY SECURITY RULES"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  1. Open Firebase Console"
echo "     https://console.firebase.google.com"
echo ""
echo "  2. Select your project > Firestore Database > Rules tab"
echo ""
echo "  3. Copy-paste content from:"
echo "     src/firebase/firebaseRules.txt"
echo ""
echo "  4. Click Publish"
echo ""
echo "  âœ… Rules deployed! Users can now read/write securely"
echo ""

echo "ğŸ”§ STEP 3: CREATE COMPOSITE INDEXES (Optional)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  Firestore will auto-suggest indexes as you query."
echo "  When prompted in Console, create these indexes:"
echo ""
echo "  products collection:"
echo "    - category + price"
echo "    - category + createdAt"
echo ""
echo "  orders collection:"
echo "    - userId + createdAt"
echo ""
echo "  reviews collection:"
echo "    - productId + createdAt"
echo ""

echo "ğŸ“š STEP 4: UNDERSTAND YOUR BACKEND"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  Read these files to understand how it works:"
echo ""
echo "  1. 00_START_HERE.md"
echo "     â†³ Quick overview of what was created"
echo ""
echo "  2. README_FIREBASE.md"
echo "     â†³ Complete setup & API reference"
echo ""
echo "  3. ARCHITECTURE_DIAGRAM.md"
echo "     â†³ Visual diagrams of the system"
echo ""
echo "  4. src/firebase/FIREBASE_GUIDE.md"
echo "     â†³ Deep-dive examples & best practices"
echo ""

echo "ğŸ’» STEP 5: USE IN YOUR COMPONENTS"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  Example: Authentication"
echo ""
echo "  import { useAuth } from './hooks/useAuth';"
echo ""
echo "  function LoginPage() {"
echo "    const { login, loading, error } = useAuth();"
echo "    const result = await login(email, password);"
echo "  }"
echo ""
echo "  Example: Data Fetching"
echo ""
echo "  import { useFirestore } from './hooks/useFirestore';"
echo ""
echo "  function ProductList() {"
echo "    const { data: products } = useFirestore('products', [...]);"
echo "  }"
echo ""

echo "âœ… STEP 6: TEST YOUR BACKEND"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  Run through this checklist:"
echo ""
echo "  Authentication:"
echo "    â˜ Signup with new email"
echo "    â˜ Login with correct password"
echo "    â˜ Login fails with wrong password"
echo "    â˜ Logout works"
echo "    â˜ User stays logged in after page reload"
echo ""
echo "  Database:"
echo "    â˜ Create a product"
echo "    â˜ Read the product"
echo "    â˜ Update the product"
echo "    â˜ Delete the product"
echo ""
echo "  Real-Time:"
echo "    â˜ Subscribe to product changes"
echo "    â˜ Update product in Firebase Console"
echo "    â˜ Component updates immediately"
echo ""
echo "  Pagination:"
echo "    â˜ Load products (20 per page)"
echo "    â˜ Click 'Load More'"
echo "    â˜ More items load"
echo ""

echo "ğŸš€ STEP 7: DEPLOY TO PRODUCTION"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  Before deploying, verify:"
echo ""
echo "  â˜ All environment variables set in deployment platform"
echo "  â˜ Security rules deployed to Firestore"
echo "  â˜ Composite indexes created (if needed)"
echo "  â˜ No hardcoded secrets in code"
echo "  â˜ Error handling tested"
echo "  â˜ Loading states show properly"
echo ""
echo "  Then:"
echo "    npm run build"
echo "    # Deploy to your hosting platform"
echo ""

echo "ğŸ“ REFERENCE GUIDE"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo ""
echo "  Core Services:"
echo "    â”œâ”€ authService.js        : Signup, login, logout"
echo "    â”œâ”€ firestoreService.js   : CRUD, queries, pagination"
echo "    â””â”€ constants.js          : Validation, utilities"
echo ""
echo "  Custom Hooks:"
echo "    â”œâ”€ useAuth.js            : Authentication state"
echo "    â””â”€ useFirestore.js       : Data fetching"
echo ""
echo "  Configuration:"
echo "    â”œâ”€ firebaseConfig.js     : Firebase initialization"
echo "    â”œâ”€ firebaseRules.txt     : Security rules"
echo "    â””â”€ .env.example          : Environment template"
echo ""
echo "  Documentation:"
echo "    â”œâ”€ README_FIREBASE.md    : Complete guide"
echo "    â”œâ”€ FIREBASE_GUIDE.md     : Examples & patterns"
echo "    â””â”€ ARCHITECTURE_DIAGRAM.md : Visual diagrams"
echo ""

echo "ğŸ¯ QUICK COMMANDS"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo ""
echo "  # Start dev server"
echo "  npm run dev"
echo ""
echo "  # Build for production"
echo "  npm run build"
echo ""
echo "  # Preview production build"
echo "  npm run preview"
echo ""

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  âœ… SETUP COMPLETE!"
echo ""
echo "  Next: Read 00_START_HERE.md for quick overview"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
